name = "moe-counter-cloudflare"
main = "src/worker.js"
compatibility_date = "2026-02-13"
compatibility_flags = ["nodejs_compat"]
workers_dev = true

[assets]
directory = "./assets"
binding = "ASSETS"

[[d1_databases]]
binding = "DB"
database_name = "moe-counter"
migrations_dir = "migrations"

# Put runtime vars in `.env` / `.dev.vars` or Cloudflare dashboard:
# DB_DRIVER, LOG_LEVEL, APP_SITE, GA_ID, COUNTER_PREFIX,
# UPSTASH_REDIS_REST_URL, UPSTASH_REDIS_REST_TOKEN
# D1 is bound by name (no `database_id` in repo) so open-source templates
# don't expose account-specific IDs. For older Wrangler/Dashboard flows,
# manual binding by `database_id` may still be required.
